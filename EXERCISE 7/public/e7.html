<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Project 1</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
     <link href ="lab10.css" rel="stylesheet">
     <!-- <link href ="Responsive.css" rel="stylesheet"> -->
     <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap');
        </style>
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Montserrat&display=swap');
          </style>
              <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">

        
</head>
<body>
    <div class="container-fluid">
      <header>
        <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Dropdown button
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <a class="dropdown-item" href="#">Action</a>
              <a class="dropdown-item" href="#">Another action</a>
              <a class="dropdown-item" href="#">Something else here</a>
            </div>
        </div>
        <!-- <h1><iconify-icon icon="mdi:sofa-outline"></iconify-icon>LUX FUR</h1>
       <iconify-icon icon="mdi:sofa-outline"></iconify-icon> -->
        <div class="shopping">
            <iconify-icon id="iconify-icon" icon="gravity-ui:shopping-bag"></iconify-icon>
          <span class="quantity">0</span>
        </div>
      </header>
      <div class="cart-view">
        <h1>Your Cart</h1>
    <ul class="listCart"></ul>
    <div class="checkOut">
      <div>Total: $ <span class="total"></span></div>
      <div class="closeShop">Close</div>
    </div>
    </div>
 
    <template id="card-template">
        <div class="card">
            <div class="card-body">
              <div class="card-img"></div> 
                <div class="card-title"></div>
                <div class="card-text"></div>
                <div class="card-price"></div>
                <button class="addToCart">Add to Cart</button>
            </div>
        </div>
    </template> 
    <div id="card-list"></div>
  






    <script>
let fetchedProducts = [];

function fetchProducts() {
    fetch('/api/list')
        .then(response => response.json())
        // .then(data => {
          .then(json => {fetchProducts = json; addcards(json)})
        }
//             const products = data.productList || data; // Adjust according to the actual API response
//             fetchedProducts = products;
//             console.log("Fetched Products:", fetchedProducts);

//             fetchedProducts.forEach(product => {
//                 addCard(product);
//             });
//         })
//         .catch(error => console.error('Error fetching products:', error));
// }


// function addToCart(productId) {
//     console.log("Added product to cart:", productId);
//     // Implement adding to cart logic here
// }
function addcards(cards) {
  cards.forEach(addCard(card))
  console.log(card);

}


function addCard(product) {
    const template = document.getElementById("card-template").content.cloneNode(true);
    // Populate the template with product details
    template.querySelector('.card-title').innerText = product._title;
    template.querySelector('.card-text').innerText = productList.product.description;
    template.querySelector('.card-price').innerText = `Total: $ ${productList.product.price}`;
    // Add event listener to the Add to Cart button
    const addToCartButton = template.querySelector('.addToCart');
    addToCartButton.addEventListener('click', () => {
        addToCart(product.id); // Call addToCart with the product id
    });
    document.querySelector('#card-list').appendChild(template);
}

document.addEventListener('DOMContentLoaded', fetchProducts);

    </script>

    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
  <script src ="lab10.js"></script>
  

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" ></script> 
    </body>
    </html>